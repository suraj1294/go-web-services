
DROP TABLE IF EXISTS CUSTOMERS;

CREATE TABLE CUSTOMERS (
  CUSTOMER_ID SERIAL PRIMARY KEY,
  NAME VARCHAR(100) NOT NULL,
  DATE_OF_BIRTH date NOT NULL,
  CITY VARCHAR(100) NOT NULL,
  ZIPCODE VARCHAR(10) NOT NULL,
  STATUS SMALLINT NOT NULL DEFAULT '1'
  );
  
INSERT INTO CUSTOMERS VALUES
	(2000,'Steve','1978-12-15','Delhi','110075',1),
	(2001,'Arian','1988-05-21','Newburgh, NY','12550',1),
	(2002,'Hadley','1988-04-30','Englewood, NJ','07631',1),
	(2003,'Ben','1988-01-04','Manchester, NH','03102',0),
	(2004,'Nina','1988-05-14','Clarkston, MI','48348',1),
	(2005,'Osman','1988-11-08','Hyattsville, MD','20782',0);
	
DROP TABLE IF EXISTS ACCOUNTS;

CREATE TABLE ACCOUNTS (
  ACCOUNT_ID SERIAL PRIMARY KEY,
  CUSTOMER_ID INT references CUSTOMERS(CUSTOMER_ID),
  OPENING_DATE DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,
  ACCOUNT_TYPE VARCHAR(10) NOT NULL,
  AMOUNT DECIMAL(10,2) NOT NULL,
  STATUS SMALLINT NOT NULL DEFAULT '1'
);

INSERT INTO ACCOUNTS VALUES
	(95470,2000,'2020-08-22 10:20:06', 'saving', 6823.23, 1),
	(95471,2002,'2020-08-09 10:27:22', 'checking', 3342.96, 1),
  (95472,2001,'2020-08-09 10:35:22', 'saving', 7000, 1),
  (95473,2001,'2020-08-09 10:38:22', 'saving', 5861.86, 1);
  
DROP TABLE IF EXISTS TRANSACTIONS;

CREATE TABLE TRANSACTIONS (
  TRANSACTION_ID SERIAL PRIMARY KEY,
  ACCOUNT_ID INT references ACCOUNTS(ACCOUNT_ID),
  AMOUNT DECIMAL(10,2) NOT NULL,
  TRANSACTION_TYPE VARCHAR(10) NOT NULL,
  TRANSACTION_DATE DATE NOT NULL DEFAULT CURRENT_TIMESTAMP
 );
 
 DROP TABLE IF EXISTS USERS;
 
 CREATE TABLE USERS (
  USERNAME VARCHAR(20) PRIMARY KEY NOT NULL,
  PASSWORD VARCHAR(20) NOT NULL,
  ROLE VARCHAR(20) NOT NULL,
  CUSTOMER_ID INT DEFAULT NULL,
  CREATED_ON DATE NOT NULL DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO USERS VALUES
  ('admin','abc123','admin', NULL, '2020-08-09 10:27:22'),
  ('2001','abc123','user', 2001, '2020-08-09 10:27:22'),
  ('2000','abc123','user', 2000, '2020-08-09 10:27:22');
  
DROP TABLE IF EXISTS REFRESH_TOKEN_STORE;

CREATE TABLE REFRESH_TOKEN_STORE (
    REFRESH_TOKEN VARCHAR(300) PRIMARY KEY NOT NULL,
    CREATED_ON TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);